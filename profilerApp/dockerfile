FROM python:3.12.4-alpine3.19

RUN apk update && \
    apk add --no-cache \
        build-base \
        postgresql-dev \
        libpq

RUN mkdir /profilerApp
WORKDIR /profilerApp

COPY requirements.txt /profilerApp/
RUN pip install --no-cache-dir -r /profilerApp/requirements.txt

COPY run.py /profilerApp
COPY .env.production /profilerApp/
COPY src ./src

EXPOSE 5000
CMD ["python", "run.py"]

